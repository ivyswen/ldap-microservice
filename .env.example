# LDAP 微服务配置示例文件
# 复制此文件为 .env 并根据你的环境修改配置
# Copy this file to .env and modify according to your environment

# ============================================
# 服务配置 / Service Configuration
# ============================================

# 服务监听端口 / HTTP server port
SERVICE_PORT=8080

# API 路径前缀 / API base path prefix
# 可选，用于在所有 API 端点前添加前缀
# Optional, adds a prefix to all API endpoints
# 示例 / Examples:
#   BASE_PATH=/api       -> /api/v1/auth, /api/v1/healthz
#   BASE_PATH=/ldap      -> /ldap/v1/auth, /ldap/v1/healthz
#   BASE_PATH=           -> /v1/auth, /v1/healthz (default, no prefix)
# 注意: 前缀会自动规范化（移除末尾的 /，确保开头有 /）
# Note: Prefix is automatically normalized (trailing / removed, leading / ensured)
BASE_PATH=

# ============================================
# LDAP 连接配置 / LDAP Connection Configuration
# ============================================

# LDAP 服务器 URL
# 示例: ldap://ldap.example.com:389
# Example: ldap://ldap.example.com:389
LDAP_URL=ldap://ldap.example.com:389

# 是否使用 LDAPS (安全连接)
# 值: 0 (否) 或 1 (是)
# Value: 0 (no) or 1 (yes)
LDAP_USE_LDAPS=0

# 是否使用 StartTLS (升级到安全连接)
# 值: 0 (否) 或 1 (是)
# Value: 0 (no) or 1 (yes)
LDAP_USE_STARTTLS=0

# 是否跳过 TLS 证书验证 (仅用于测试环境)
# 值: 0 (否) 或 1 (是)
# Value: 0 (no) or 1 (yes)
LDAP_INSECURE_SKIP_VERIFY=0

# ============================================
# LDAP 服务账户配置 / Service Account Configuration
# ============================================

# 服务账户 DN (用于搜索用户)
# 示例: cn=admin,dc=example,dc=com
# Example: cn=admin,dc=example,dc=com
LDAP_BIND_DN=cn=admin,dc=example,dc=com

# 服务账户密码
# Password for service account
LDAP_BIND_PASSWORD=password123

# ============================================
# LDAP 用户搜索配置 / User Search Configuration
# ============================================

# 用户搜索基础 DN
# 示例: dc=example,dc=com
# Example: dc=example,dc=com
LDAP_USER_BASE=dc=example,dc=com

# 用户搜索过滤器
# 示例 (OpenLDAP): (uid=%s)
# 示例 (Active Directory): (sAMAccountName=%s)
# Example (OpenLDAP): (uid=%s)
# Example (Active Directory): (sAMAccountName=%s)
LDAP_USER_FILTER=(uid=%s)

# 用户 DN 属性名 (可选)
# 如果不设置，将使用 LDAP 条目的 DN
# Optional. If not set, the entry DN will be used
# LDAP_USER_DN_ATTR=uid

# ============================================
# 超时配置 / Timeout Configuration
# ============================================

# LDAP 连接超时 (秒)
# LDAP connection timeout (seconds)
LDAP_CONN_TIMEOUT=5

# LDAP 请求超时 (秒)
# LDAP request timeout (seconds)
LDAP_REQUEST_TIMEOUT=8

# ============================================
# 日志配置 / Logging Configuration
# ============================================

# 日志级别: debug, info, warn, error
# Log level: debug, info, warn, error
LOG_LEVEL=info

# ============================================
# 常见配置示例 / Common Configuration Examples
# ============================================

# 示例 1: 本地 OpenLDAP 测试环境
# Example 1: Local OpenLDAP test environment
# LDAP_URL=ldap://localhost:389
# LDAP_BIND_DN=cn=admin,dc=example,dc=com
# LDAP_BIND_PASSWORD=admin
# LDAP_USER_BASE=ou=users,dc=example,dc=com
# LDAP_USER_FILTER=(uid=%s)

# 示例 2: Active Directory (LDAPS)
# Example 2: Active Directory (LDAPS)
# LDAP_URL=ldaps://ad.example.com:636
# LDAP_USE_LDAPS=1
# LDAP_INSECURE_SKIP_VERIFY=0
# LDAP_BIND_DN=CN=ServiceAccount,CN=Users,DC=example,DC=com
# LDAP_BIND_PASSWORD=ServicePassword123
# LDAP_USER_BASE=CN=Users,DC=example,DC=com
# LDAP_USER_FILTER=(sAMAccountName=%s)

# 示例 3: Active Directory (StartTLS)
# Example 3: Active Directory (StartTLS)
# LDAP_URL=ldap://ad.example.com:389
# LDAP_USE_STARTTLS=1
# LDAP_INSECURE_SKIP_VERIFY=0
# LDAP_BIND_DN=CN=ServiceAccount,CN=Users,DC=example,DC=com
# LDAP_BIND_PASSWORD=ServicePassword123
# LDAP_USER_BASE=CN=Users,DC=example,DC=com
# LDAP_USER_FILTER=(sAMAccountName=%s)

